<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Latency Slayer | Dashboard Billing e Forcasting</title>
    <script src="./script/components/navBar.js"></script>
    <link rel="stylesheet" href="./style/dashBilling.css">
    <script src="https://cdn.jsdelivr.net/npm/apexcharts"></script>
</head>
<body>
    <nav-bar></nav-bar>
    <main>
        <div class="container">
            <div class="titulo-principal">Observability - FinOps</div>
            <header>
                <h1>Billing & Forcasting</h1>
            </header>
            <div class="kpis">
                <div class="kpi-content">
                    <div class="kpi">
                        <div class="linha1">
                            <img src="./img/cifrao.svg" height="50px">
                            <div class="titulo">Taxa de custo do mês atual</div>
                        </div>
                        <div class="linha1">
                            <div class="valor" style="padding-left: 10px;">R$ 125.00 <img src="./img/seta-vermelha.svg"></div>
                            <div style="color: #DC2626;">37.8%</div><div style="padding-left: 5px;">este mês</div>
                        </div>
                    </div>
                    <div class="kpi">
                        <div class="linha1">
                            <img src="./img/relogio.svg" height="50px">
                            <div class="titulo">Previsão de custo para o final do mês atual</div>
                        </div>
                        <div class="linha1">
                            <div class="valor" style="padding-left: 10px;">R$ 160.00 <img src="./img/seta-vermelha.svg"></div>
                            <div style="color: #DC2626;">67.8%</div><div style="padding-left: 5px;">este mês</div>
                        </div>
                    </div>
                    <div class="kpi">
                        <div class="linha1">
                            <img src="./img/barras.svg" height="50px">
                            <div class="titulo">Meta de gasto mensal</div>
                        </div>
                        <div class="linha1">
                            <div class="valor" style="padding-left: 5px; font-size: 20px;">R$ 125.00/R$250.00 <img style="height: 20px;" src="./img/seta-verde.svg"></div>
                            <div style="color: #00D207;">16.6%</div><div style="padding-left: 5px;">este mês</div>
                        </div>
                    </div>
                </div>    
            </div>

            <div class="graficos">
                <div class="plot-content">
                    <div class="grafico1">
                        <div class="titulo">Visualização de Custos</div>
                        <div class="subtitulo">custo mensal</div>
                        <div id="grafico-01"></div>
                        <div class="legenda">
                            <div class="indicador-cor-1"></div><div>mês anterior</div>
                            <div class="indicador-cor-2"></div><div>mês atual</div>
                            <div class="indicador-cor-3"></div><div>previsão mês futuro</div>
                        </div>
                    </div>
                    <div class="grafico2">
                        <div class="titulo">Porcentagem de custos por serviço</div>
                        <div class="plot-grafico">
                            <div id="grafico-02"></div>
                        </div>
                    </div>
                </div>
            </div>
            <br><br><br><br><br><br>
        </div>
    </main>
</body>
<script>
    new ApexCharts(
        document.querySelector("#grafico-01"),
        {
            chart: {
            type: 'bar',
            height: "70%",
            toolbar: {
                show: false
            }
            },
            grid: {
                show: false
            },
            plotOptions: {
            bar: {
            horizontal: false,
            borderRadius: 10
            }
            },
            yaxis: {
                labels: {
                    formatter: function (val) {
                        return "R$" + val;
                    },
                    style: {
                        fontSize: 16,
                    }
                }
            },
            xaxis: {
                axisBorder: {
                    show: false,
                },
                axisTicks: {
                    show: false,
                },
            },
            series: [{
                name: "gasto",
                data: [{
                        x: 'fev',
                        y: 60,
                        fillColor: '#f803bb'
                    }, {
                        x: 'mar',
                        y: 75,
                        fillColor: '#f803bb'
                    }, {
                        x: 'abr',
                        y: 80,
                        fillColor: '#f803bb'
                    }, {
                        x: 'mai',
                        y: 125,
                        fillColor: '#3d1b91'
                    }, {
                        x: 'jun',
                        y: 125,
                        fillColor: '#3a2e5d57'
                    }, {
                        x: 'jul',
                        y: 120,
                        fillColor: '#3a2e5d57'
                    }, {
                        x: 'ago',
                        y: 115,
                        fillColor: '#3a2e5d57'
                    }]
            }]
        }
    ).render();

    new ApexCharts(
        document.querySelector("#grafico-02"),
        {
            chart: {
                type: 'donut',
                width: '100%',
            },
            series: [55, 30, 15],
            labels: ["EC2", "S3", "Lambda"],
            legend: {
                position: 'bottom'
            },
            colors: ["#B69CF6", "#0F5FC2", "#FF83E8"],
            plotOptions: {
                pie: {
                    donut: {
                        size: '60%'
                    }
                }
            },
            dataLabels: {
                enabled: true,
            },
            states: {
                hover: {
                    filter: {
                        type: 'darken', // ou 'lighten'
                        value: 0.1 // intensidade do efeito
                    }
                }
            }
        }
    ).render()
</script>
</html>