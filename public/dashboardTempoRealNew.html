<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Latency Slayer | Tempo Real</title>
    <link rel="stylesheet" href="style/dashTempoReal2.css" />
    <script src="script/components/navBar.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <script src="./script/hardware-fetch.js"></script>
    <script src="./script/process-fetch.js"></script>
    <link
        href="https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap"
        rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/apexcharts"></script>
</head>

<body onload="getData(), getProcess()">
    <main>
        <nav-bar></nav-bar>

        <div class="container">
            <header style="margin-left: 10px;">
                <h1 style="color: #56408C;" id="titulo"></h1>
            </header>

            <div class="kpis">
                <div class="kpi first">
                    <div class="kpi-content">
                        <span class="text-kpi">Uso de CPU - <span>Limite: 15%</span></span>
                        <h1 id="cpuUsage"></h1>
                    </div>
                </div>

                <div class="kpi second">
                    <div class="kpi-content">
                        <span class="text-kpi">Uso de RAM - <span>Limite: 15%</span></span>
                        <h1 id="ramUsage"></h1>
                    </div>
                </div>

                <div class="kpi third">
                    <div class="kpi-content">
                        <span class="text-kpi">Uso de Disco - <span>Limite: 15%</span></span>
                        <h1 id="diskUsage"></h1>
                    </div>
                </div>
            </div>

            <div class="graficos">
                <div class="processos">
                    <h3 style="margin-left: 10px; color: #56408C;">Lista de Processos</h3>
                    <table style="width: 100%; text-align: center;">
                        <thead>
                            <tr>
                                <th>PID</th>
                                <th>Processo</th>
                                <th>Uso de CPU</th>
                                <th>Uso de RAM</th>
                                <th>Uso da RAM (%)</th>
                                <th>Status</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr class="danger">
                                <td>1236</td>
                                <td>Java</td>
                                <td>25%</td>
                                <td>4.6GB</td>
                                <td>14%</td>
                                <td>Rodando</td>
                            </tr>
                            <tr class="danger">
                                <td>938</td>
                                <td>Google Chrome</td>
                                <td>20%</td>
                                <td>2.4GB</td>
                                <td>10%</td>
                                <td>Rodando</td>
                            </tr>
                            <tr class="warning">
                                <td>712</td>
                                <td>MySQL Server</td>
                                <td>7%</td>
                                <td>100MB</td>
                                <td>6%</td>
                                <td>Rodando</td>
                            </tr>
                            <tr class="warning">
                                <td>1300</td>
                                <td>Radmin VPN</td>
                                <td>10%</td>
                                <td>200MB</td>
                                <td>4%</td>
                                <td>Rodando</td>
                            </tr>
                            <tr class="warning">
                                <td>0</td>
                                <td>Serviços do Sistema</td>
                                <td>7%</td>
                                <td>200MB</td>
                                <td>2%</td>
                                <td>Rodando</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                    <div class="grafico-barra">
                        <div class="chart-grafico">
                            <div class="line-chart-title text-kpi">Quantidade de alertas na semana: </div>
                            <div id="grafico-uso-armazenamento"></div>                        
                        </div>
                    </div>
                </div>
            </div>
        </div>
        </div>
    </main>

    <script>
        const params = new URLSearchParams(window.location.search);
        const tagName = params.get("tag");

        document.addEventListener("DOMContentLoaded", () => {
        const h1 = document.getElementById("titulo");
        h1.textContent = "Servidor " + tagName;
        });

        // Barra de Alertas
        new ApexCharts(
            document.querySelector("#grafico-uso-armazenamento"),
            {
                series: [
                    {
                        name: "Quantidade de Alertas",
                        type: "bar",
                        data: [12,54,90,2,13,50,10],
                        color: "#44395F",
                    },
                ],
                chart: {
                    height: 400,
                    width: 900,
                    toolbar: {
                        show: true,
                    },
                },
                dataLabels: {
                    enabled: false,
                },

                xaxis: {
                    categories: ["Segunda", "Terça", "Quarta", "Quinta", "Sexta", "Sábado", "Domingo"]
                },
                
                yaxis: {
                    
                },
                
            }
        ).render();
    </script>
</body>

</html>