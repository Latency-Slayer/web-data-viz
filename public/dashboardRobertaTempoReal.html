<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Latency Slayer | Tempo Real</title>
    <link rel="stylesheet" href="style/dashTempoReal.css" />
    <script src="script/components/navBar.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap"
        rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/apexcharts"></script>
</head>

<body>
    <main>
        <nav-bar></nav-bar>

        <div class="container">
            <header style="margin-left: 10px;">
                <h1 style="color: #56408C;">Servidor ext-04202501</h1>
            </header>

            <div class="kpis">
                <div class="kpi first">
                    <div class="kpi-content">
                        <span class="text-kpi">Pico de CPU - <span>Limite: 80%</span></span>
                        <h1>81%</h1>
                    </div>
                </div>

                <div class="kpi second">
                    <div class="kpi-content">
                        <span class="text-kpi">Pico de RAM - <span>Limite: 15GB</span></span>
                        <h1>8.9GB</h1>
                    </div>
                </div>

                <div class="kpi third">
                    <div class="kpi-content">
                        <span class="text-kpi">Pico de Disco - <span>Limite: 75%</span></span>
                        <h1>69%</h1>
                    </div>
                </div>
            </div>

            <div class="graficos">
                <div class="processos">
                    <h3 style="margin-left: 10px; color: #56408C;">Lista de Processos</h3>
                    <table style="width: 100%; text-align: center;">
                        <thead>
                            <tr>
                                <th>PID</th>
                                <th>Processo</th>
                                <th>Uso de CPU</th>
                                <th>Uso de RAM</th>
                                <th>Uso da RAM (%)</th>
                                <th>Status</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>1236</td>
                                <td>Java</td>
                                <td>25%</td>
                                <td>4.6GB</td>
                                <td>14%</td>
                                <td>Rodando</td>
                            </tr>
                            <tr>
                                <td>938</td>
                                <td>Google Chrome</td>
                                <td>20%</td>
                                <td>2.4GB</td>
                                <td>10%</td>
                                <td>Rodando</td>
                            </tr>
                            <tr>
                                <td>712</td>
                                <td>MySQL Server</td>
                                <td>7%</td>
                                <td>100MB</td>
                                <td>6%</td>
                                <td>Rodando</td>
                            </tr>
                            <tr>
                                <td>800</td>
                                <td>MongoDB</td>
                                <td>12%</td>
                                <td>500MB</td>
                                <td>4%</td>
                                <td>Parado</td>
                            </tr>
                            <tr>
                                <td>1300</td>
                                <td>Radmin VPN</td>
                                <td>10%</td>
                                <td>200MB</td>
                                <td>4%</td>
                                <td>Rodando</td>
                            </tr>
                            <tr>
                                <td>0</td>
                                <td>Serviços do Sistema</td>
                                <td>7%</td>
                                <td>200MB</td>
                                <td>2%</td>
                                <td>Rodando</td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <div class="graficos-linhas">
                    <div class="container-graficos-linhas">
                        <div class="chart-use-cpu">
                            <div class="line-chart-title text-kpi">Uso da CPU (%)</div>
                            <div id="grafico-cpu-pctg"></div>
                        </div>

                        <div class="graphs-ram">
                            <div class="line-chart-title text-kpi">Uso da Memória (GB)</div>
                            <div id="grafico-uso-memoria"></div>
                        </div>
                    </div>

                    <div class="grafico-barra">
                        <div class="chart-grafico">
                            <div class="line-chart-title text-kpi">Uso do Disco (GB)</div>
                            <div id="grafico-uso-armazenamento"></div>                        
                        </div>
                    </div>
                </div>
                <!-- <div class="first-line-graphs">
                <div class="graphs-monitoring-storage">
                    <p class="text-kpi">Monitoramento de armazenamento</p>
                    <h3>Gráfico de Barra de cada armazenamento</h3>
                    <div class="storage-chart-container">
                        <div class="disk">
                            <div class="disk-chart">
                                <div class="flex-percent">
                                    <div class="use-percent">36%</div>
                                </div>
                            </div>
                        </div>
                        <div class="disk">
                            <div class="disk-chart">
                                <div class="flex-percent">
                                    <div class="use-percent">12%</div>
                                </div>
                            </div>
                        </div>
                        <div class="disk">
                            <div class="disk-chart">
                                <div class="flex-percent">
                                    <div class="use-percent">67%</div>
                                </div>
                            </div>
                        </div>
                        <div class="disk">
                            <div class="disk-chart">
                                <div class="flex-percent">
                                    <div class="use-percent">90%</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                
                
            </div> -->

                <!-- <div class="second-line-graphs">
                <div class="chart-use-cpu">
                    <div class="line-chart-title text-kpi">Uso da CPU (%)</div>
                    <div id="grafico-cpu-pctg"></div>
                </div>

                <div class="graphs-ram">
                    <div class="line-chart-title text-kpi">Uso da Memória (GB)</div>
                    <div id="grafico-uso-memoria"></div>
                </div>
            </div> -->
            </div>
        </div>
        </div>
    </main>

    <script>


        function dateTimeCategories() {
            const dates = new Array();
            const initialDate = new Date();

            const timezoneOffset = -3 * 60;

            for (let i = 0; i < 60 / 3; i++) {

                const newDate = new Date(initialDate.getTime() + i * 3000);
                newDate.setMinutes(newDate.getMinutes() + timezoneOffset);
                dates.push(newDate.getTime());
            }

            return dates;
        }

        // Gráfico CPU (%)
        new ApexCharts(
            document.querySelector("#grafico-cpu-pctg"),
            {
                series: [
                    {
                        name: "Porcentagem da CPU",
                        data: [
                            31, 40, 28, 51, 42, 100, 100, 100,
                            95, 88, 70, 77, 84, 92, 65, 73,
                            86, 90, 80, 79, 81,
                        ],
                        color: "#44395F"
                    },
                    {
                        name: "Limite",
                        type: "line",
                        color: "#e14849",
                        data: Array(20).fill(85),
                    }
                ],
                chart: {
                    height: 150,
                    width: 450,
                    type: "line",
                    toolbar: {
                        show: true,
                    },
                },
                dataLabels: {
                    enabled: false,
                },
                xaxis: {
                    type: "datetime",
                    categories: dateTimeCategories(), // Agora com a data ajustada para o fuso horário brasileiro
                },
                tooltip: {
                    x: {
                        format: "dd/MM/yy HH:mm:ss",
                    },
                },
                grid: {
                    show: false,
                },
                yaxis: {
                    min: 0,
                    max: 100,
                    labels: {
                        formatter: function (val) {
                            return val + "%";
                        },
                        style: {
                            fontSize: 16,
                        }
                    }
                },
            }
        ).render();


        // Gráfico uso da memória (GB)
        new ApexCharts(
            document.querySelector("#grafico-uso-memoria"),
            {
                series: [
                    {
                        name: "Uso de memória RAM",
                        type: "line",
                        data: [12, 10, 8, 10, 9, 9, 14, 11, 7, 6, 15, 13, 17, 5, 18, 14, 16, 3, 19, 8],
                        color: "#44395F"
                    },
                    {
                        name: "Limite",
                        type: "line",
                        color: "#e14849",
                        data: Array(20).fill(14),
                    },
                ],
                chart: {
                    height: 150,
                    width: 450,
                    toolbar: {
                        show: true,
                    },
                },
                dataLabels: {
                    enabled: false,
                },

                xaxis: {
                    type: "datetime",
                    categories: dateTimeCategories(),
                },
                tooltip: {
                    x: {
                        format: "dd/MM/yy HH:mm",
                    },
                },
                grid: {
                    show: false
                },
                yaxis: {
                    labels: {
                        formatter: function (val) {
                            return val + "GB";
                        },
                        style: {
                            fontSize: 16,
                        }
                    }
                },
            }
        ).render();

        // Barra Armazenamento

        new ApexCharts(
            document.querySelector("#grafico-uso-armazenamento"),
            {
                series: [
                    {
                        name: "Uso de memória RAM",
                        type: "bar",
                        data: [12,54,90,2,13],
                        color: "#44395F",
                    },
                     {
                        name: "Limite",
                        type: "bar",
                        color: "#e14849",
                        data: Array(5).fill(75),
                    },
                ],
                chart: {
                    height: 200,
                    width: 900,
                    toolbar: {
                        show: true,
                    },
                },
                dataLabels: {
                    enabled: false,
                },

                xaxis: {
                    categories: ["C://", "D://", "E://", "F://", "G://"]
                },
                
                yaxis: {
                    
                },
                
            }
        ).render();
    </script>
</body>

</html>